<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON Search</title>
</head>
<body>
    <h1>JSON Search</h1>
    <input type="text" id="searchInput" placeholder="Search by name">
    <button onclick="searchJSON()">Search</button>
    <div id="searchResults"></div>

    <script>
        // Function to search through JSON data
        function searchJSON() {
            const searchTerm = document.getElementById("searchInput").value.trim().toLowerCase();
            const searchResultsContainer = document.getElementById("searchResults");
            searchResultsContainer.innerHTML = ""; // Clear previous search results

            // Search through parsed JSON data
            const results = jsonData.filter(item => item.name.toLowerCase().includes(searchTerm));
            displayResults(results, searchResultsContainer);
        }

        // Function to fetch and parse all JSON files in the same directory
        async function fetchAndParseAllJSONFiles() {
            const response = await fetch('.');
            const text = await response.text();
            const parser = new DOMParser();
            const htmlDocument = parser.parseFromString(text, 'text/html');
            const links = Array.from(htmlDocument.querySelectorAll('a')).map(link => link.href);
            const jsonFiles = links.filter(link => link.endsWith('.json'));

            const jsonDataPromises = jsonFiles.map(async (file) => {
                const response = await fetch(file);
                return response.json();
            });

            return Promise.all(jsonDataPromises);
        }

        let jsonData = []; // Store parsed JSON data globally

        // Function to display search results
        function displayResults(results, container) {
            if (results.length === 0) {
                container.innerHTML += "<p>No results found.</p>";
                return;
            }

            results.forEach(result => {
                const resultElement = document.createElement("p");
                resultElement.textContent = `Name: ${result.name}, Age: ${result.age}`; // Adjust as per your JSON structure
                container.appendChild(resultElement);
            });
        }

        // Fetch and parse JSON files when the page loads
        window.onload = async function () {
            jsonData = await fetchAndParseAllJSONFiles();
        };
    </script>
</body>
</html>
